<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Session App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      color: #333;
      margin: 0;
      padding: 20px;
      transition: background 0.5s, color 0.5s;
    }
    .dark {
      background: #1a1a1a;
      color: #e0e0e0;
    }
    button, select {
      margin: 10px;
      padding: 10px;
    }
    #scene2 {
      display: none;
    }
    .todo-item {
      margin-bottom: 5px;
    }
    .todo-done {
      text-decoration: line-through;
    }
    #todoListView {
      margin-top: 10px;
    }
    #focusPrompt {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border: 1px solid #ccc;
      padding: 20px;
      z-index: 1000;
    }
    #todoListTopLeft {
      position: absolute;
      top: 10px;
      left: 10px;
    }
  </style>
</head>
<body>
  <button onclick="toggleTheme()">üåô Toggle Theme</button>

  <div id="scene1">
    <h1>Start Your Study Session</h1>
    <label for="duration">Choose duration:</label>
    <select id="duration">
      <option value="15">15 minutes</option>
      <option value="30">30 minutes</option>
      <option value="45">45 minutes</option>
      <option value="60">1 hour</option>
      <option value="75">1 hour 15 minutes</option>
      <option value="90">1 hour 30 minutes</option>
      <option value="105">1 hour 45 minutes</option>
      <option value="120">2 hours</option>
      <option value="135">2 hours 15 minutes</option>
      <option value="150">2 hours 30 minutes</option>
      <option value="165">2 hours 45 minutes</option>
      <option value="180">3 hours</option>
    </select>

    <h2>Tasks for this session:</h2>
    <input type="text" id="taskInput" placeholder="Enter task..." />
    <button onclick="addTask()">Add Task</button>
    <ul id="todoListView"></ul>

    <button onclick="startSession()">Start Session</button>
  </div>

  <div id="scene2">
    <div id="todoListTopLeft"></div>
    <h1>You're Studying!</h1>
    <p id="timerDisplay"></p>
    <label for="restDuration">Rest time after session:</label>
    <select id="restDuration">
      <option value="10">10 minutes</option>
      <option value="15">15 minutes</option>
    </select>
  </div>

  <div id="focusPrompt">
    <p>How focused are you feeling right now?</p>
    <button onclick="submitFocus(1)">üòê Meh</button>
    <button onclick="submitFocus(2)">üôÇ Focused</button>
    <button onclick="submitFocus(3)">üòÑ Super Focused</button>
  </div>

  <script>
    let darkMode = false;
    function toggleTheme() {
      document.body.classList.toggle("dark");
      darkMode = !darkMode;
    }

    let tasks = [];
    function addTask() {
      const task = document.getElementById("taskInput").value;
      if (task) {
        tasks.push({ text: task, done: false });
        document.getElementById("taskInput").value = "";
        renderTasks();
      }
    }

    function renderTasks() {
      const list1 = document.getElementById("todoListView");
      const list2 = document.getElementById("todoListTopLeft");
      list1.innerHTML = "";
      list2.innerHTML = "<h3>Tasks:</h3>";

      tasks.forEach((task, index) => {
        const li = document.createElement("li");
        li.innerHTML = `<input type='checkbox' onchange='toggleTask(${index})' ${task.done ? "checked" : ""}/> ${task.text}`;
        list1.appendChild(li.cloneNode(true));
        list2.appendChild(li);
      });
    }

    function toggleTask(index) {
      tasks[index].done = !tasks[index].done;
      renderTasks();
    }

    let sessionDuration = 0;
    let timerInterval;
    let focusInterval;
    let secondsPassed = 0;

    function startSession() {
      sessionDuration = parseInt(document.getElementById("duration").value) * 60;
      document.getElementById("scene1").style.display = "none";
      document.getElementById("scene2").style.display = "block";
      startTimer();
      setupFocusPrompts();
    }

    function startTimer() {
      const display = document.getElementById("timerDisplay");
      timerInterval = setInterval(() => {
        secondsPassed++;
        const mins = Math.floor((sessionDuration - secondsPassed) / 60);
        const secs = (sessionDuration - secondsPassed) % 60;
        display.textContent = `Time left: ${mins}m ${secs}s`;
        if (secondsPassed >= sessionDuration) {
          clearInterval(timerInterval);
          clearInterval(focusInterval);
          display.textContent = "Session complete!";
        }
      }, 1000);
    }

    function setupFocusPrompts() {
      const interval = sessionDuration / 4;
      let promptsShown = 0;
      focusInterval = setInterval(() => {
        if (promptsShown < 4) {
          document.getElementById("focusPrompt").style.display = "block";
          promptsShown++;
        } else {
          clearInterval(focusInterval);
        }
      }, interval * 1000);
    }

    function submitFocus(level) {
      console.log(`Focus level: ${level}`);
      document.getElementById("focusPrompt").style.display = "none";
    }
  </script>
</body>
</html>

