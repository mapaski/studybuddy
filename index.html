<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Study With Me</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap">
  <style>
    body {
      margin: 0;
      font-family: 'Baloo 2', cursive;
      color: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: #ffe6f0;
    }



    #setupScreen, #studyScreen {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: opacity 0.5s ease;
    }

    #studyScreen {
      display: none;
    }

    .card {
      background: white;
      padding: 1rem 2rem;
      margin: 1rem;
      border-radius: 16px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    h1 {
      font-size: 1.8rem;
    }

    select, button {
      margin-top: 0.5rem;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
      width: 100%;
    }

    button {
      cursor: pointer;
    }

    #scene {
      position: relative;
      width: 100vw;
      height: 100vh;
      background-size: cover;
      background-position: center;
      overflow: hidden;
    }

    #character {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      height: 100%;
      width: auto;
      max-width: 100%;
      pointer-events: none;
      opacity: 0.95;
    }

    #timer {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 2rem;
      background: rgba(255,255,255,0.8);
      padding: 0.7rem 1.2rem;
      border-radius: 12px;
    }

    #stopBtn {
      position: absolute;
      bottom: 20px;
      left: 20px;
      padding: 0.6rem 1.2rem;
      font-size: 1rem;
      background: #ffdddd;
      border: 1px solid #cc0000;
      border-radius: 8px;
      cursor: pointer;
    }

    #spotifyPlayer {
      display: none;
      position: absolute;
      bottom: 20px;
      right: 20px;
      width: 300px;
      height: 80px;
      border-radius: 12px;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="setupScreen">
    <div class="card">
      <h1>Hi, let's get this ultimate focused study session going star!! ‚ú®</h1>
    </div>

  <!-- Place HTML components here -->
  <!-- ‚úÖ To-Do List & Pomodoro Section -->
  <div class="card" style="position: absolute; top: 20px; left: 20px; z-index: 10; width: 300px;">
    <h2>üìã To-Do List</h2>
    <input type="text" id="todoInput" placeholder="Add a task..." />
    <button onclick="addTask()">Add</button>
    <ul id="todoList" style="text-align: left; padding-left: 1rem;"></ul>
  </div>

  <div class="card">
    <label>
      <input type="checkbox" id="pomodoroCheck" /> Enable Pomodoro Mode ‚è±Ô∏è
    </label>
  </div>
<!-- Normal Timer -->
<div id="normalTimer" class="card" style="position: absolute; bottom: 20px; right: 20px; z-index: 10;">
  <h2>‚è∞ Timer</h2>
  <div id="timerDisplay">00:00</div>
  <button onclick="startNormalTimer()">Start Timer</button>
</div>

<!-- Pomodoro Timer -->
<div id="pomodoroTimer" class="card" style="position: absolute; bottom: 120px; right: 20px; z-index: 10;">
  <h2>üçÖ Pomodoro Timer</h2>
  <div id="pomodoroDisplay">25:00</div>
  <button onclick="startPomodoro()">Start Pomodoro</button>
</div>

    <div class="card">
      <label for="characterSelect">Choose your study buddy:</label>
      <select id="characterSelect">
        <option value="studycat.png">Study Cat</option>
        <option value="female.png">Focused PhD student (female)</option>
        <option value="male.png">Focused PhD student (male)</option>
      </select>
    </div>

    <div class="card">
      <label for="backgroundSelect">Choose your study vibe:</label>
      <select id="backgroundSelect">
        <option value="cafe.jpg">Cafe</option>
        <option value="library.jpg">Library</option>
        <option value="studyroom.jpg">Study Room</option>
      </select>
    </div>

    <div class="card">
      <label for="timerSelect">Set your timer:</label>
      <select id="timerSelect">
        <option value="900">15 minutes</option>
        <option value="1800">30 minutes</option>
        <option value="3600">1 hour</option>
        <option value="7200">2 hours</option>
      </select>
    </div>

    <div class="card">
      <label>
        <input type="checkbox" id="spotifyCheck" /> Play chill Spotify playlist üéµ
      </label>
    </div>

    <div class="card">
      <button id="startBtn">Start Studying</button>
    </div>
  </div>

  <div id="studyScreen">
    <div id="scene">
      <div id="timer"></div>
      <img id="character" src="" alt="Character" />
      <button id="stopBtn">Stop</button>
<iframe id="spotifyPlayer" 
  style="border-radius:12px"
  src="https://open.spotify.com/embed/playlist/4NsAR3jEzcLNSLHDq6CGH1?utm_source=generator" 
  width="100%" height="80" frameBorder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy">
</iframe>
    </div>
  </div>

  <script>
 <script>
  const pomodoroCheck = document.getElementById('pomodoroCheck');
  const normalTimer = document.getElementById('normalTimer');
  const pomodoroTimer = document.getElementById('pomodoroTimer');
  const setupScreen = document.getElementById('setupScreen');
  const studyScreen = document.getElementById('studyScreen');
  const startBtn = document.getElementById('startBtn');
  const stopBtn = document.getElementById('stopBtn');
  const characterImg = document.getElementById('character');
  const scene = document.getElementById('scene');
  const timerDisplay = document.getElementById('timer');
  const spotifyPlayer = document.getElementById('spotifyPlayer');
  const spotifyCheck = document.getElementById('spotifyCheck');
  
  let timerInterval;
  let isPomodoro = false;
  let pomodoroPhases = [];
  let currentPhase = 0;

  window.onload = () => {
    normalTimer.style.display = 'none';
    pomodoroTimer.style.display = 'none';
  };

  startBtn.addEventListener('click', () => {
    const character = document.getElementById('characterSelect').value;
    const background = document.getElementById('backgroundSelect').value;
    const duration = parseInt(document.getElementById('timerSelect').value);
    isPomodoro = pomodoroCheck.checked;

    characterImg.src = character;
    scene.style.backgroundImage = `url(${background})`;
    spotifyPlayer.style.display = spotifyCheck.checked ? "block" : "none";

    if (isPomodoro) {
      normalTimer.style.display = 'none';
      pomodoroTimer.style.display = 'block';

      pomodoroPhases = [
        { type: 'Focus', duration: 1500 },
        { type: 'Break', duration: 300 },
        { type: 'Focus', duration: 1500 },
        { type: 'Break', duration: 300 },
        { type: 'Focus', duration: 1500 },
        { type: 'Break', duration: 300 },
        { type: 'Focus', duration: 1500 },
      ];
      currentPhase = 0;
      startPomodoroPhase();
    } else {
      pomodoroTimer.style.display = 'none';
      normalTimer.style.display = 'block';
      startTimer(duration);
    }

    setupScreen.style.display = 'none';
    studyScreen.style.display = 'flex';
  });

  function startPomodoroPhase() {
    if (currentPhase >= pomodoroPhases.length) {
      alert("Pomodoro session complete!");
      return;
    }

    const phase = pomodoroPhases[currentPhase];
    updateTimerLabel(phase.type);
    startTimer(phase.duration, () => {
      currentPhase++;
      startPomodoroPhase();
    });
  }

  function startTimer(seconds, callback) {
    clearInterval(timerInterval);
    let remaining = seconds;
    updateTimerDisplay(remaining);
    timerInterval = setInterval(() => {
      remaining--;
      updateTimerDisplay(remaining);
      if (remaining <= 0) {
        clearInterval(timerInterval);
        if (callback) callback();
      }
    }, 1000);
  }

  function updateTimerLabel(type) {
    timerDisplay.textContent = `${type} Session ‚è≥`;
  }

  function updateTimerDisplay(seconds) {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    timerDisplay.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
  }

  // üîî Daily Reminder Notification
  if (Notification.permission !== "granted") {
    Notification.requestPermission();
  }
  setTimeout(() => {
    if (Notification.permission === "granted") {
      new Notification("üß† Stay sharp!", {
        body: "Time for a focused study session with your buddy!",
      });
    }
  }, 3000);

  // ‚úÖ To-Do List Logic
  function addTask() {
    const input = document.getElementById('todoInput');
    const list = document.getElementById('todoList');
    if (input.value.trim() !== '') {
      const li = document.createElement('li');
      li.innerHTML = `<input type="checkbox" /> ${input.value}`;
      list.appendChild(li);
      input.value = '';
    }
  }

  // üçÖ Backup Pomodoro Logic (Not used anymore but can be left for reference)
  let pomoSeconds = 1500;
  let pomoInterval;
  function startPomodoro() {
    clearInterval(pomoInterval);
    pomoSeconds = 1500;
    updatePomodoroDisplay();
    pomoInterval = setInterval(() => {
      pomoSeconds--;
      updatePomodoroDisplay();
      if (pomoSeconds === 0) {
        clearInterval(pomoInterval);
        const isBreak = confirm("‚è∞ Pomodoro complete! Ready for a 5-min break?");
        if (isBreak) {
          pomoSeconds = 300;
          pomoInterval = setInterval(() => {
            pomoSeconds--;
            updatePomodoroDisplay();
            if (pomoSeconds === 0) {
              clearInterval(pomoInterval);
              alert("Break over! Time to get back.");
              startPomodoro();
            }
          }, 1000);
        }
      }
    }, 1000);
  }

  function updatePomodoroDisplay() {
    const mins = Math.floor(pomoSeconds / 60);
    const secs = pomoSeconds % 60;
    document.getElementById('pomodoroDisplay').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
  }
</script>

  </script>
</body>
</html>
