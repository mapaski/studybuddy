<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Buddy</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #ffe4f2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      transition: background-image 0.5s ease-in-out;
      background-size: cover;
      background-position: center;
    }
    .container {
      max-width: 500px;
      width: 90%;
      background: rgba(255, 240, 245, 0.95);
      padding: 25px;
      margin-top: 40px;
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(255, 105, 180, 0.3);
      border: 2px solid #ff69b4;
    }
    h2 {
      text-align: center;
      color: #d63384;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ffb6c1;
      background: #fff0f5;
      font-size: 16px;
    }
    button {
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      background-color: #ff69b4;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #d63384;
    }
    #timer-screen {
      display: none;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: 20px;
      width: 100%;
      position: relative;
    }
    #character-image {
      max-width: 40%;
      max-height: 80vh;
      object-fit: contain;
    }
    #timer-tools {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      padding: 20px;
    }
    #mode-label {
      font-size: 2em;
      color: #d63384;
    }
    #timer-display {
      font-size: 4em;
      margin: 20px 0;
    }
    #progress-bar {
      width: 10px;
      height: 200px;
      background: #ffd6e8;
      position: relative;
      border-radius: 5px;
    }
    #progress-fill {
      background: #d63384;
      width: 100%;
      position: absolute;
      bottom: 0;
      height: 0%;
      border-radius: 5px;
    }
    #rest-info {
      margin-top: 10px;
    }
    #persona {
      font-size: 2.2rem;
      position: absolute;
      top: 10px;
      right: 20px;
    }
    .music-player {
      margin-top: 20px;
      display: none;
    }
  </style>
</head>
<body>
  <div id="persona">üé≠</div>
  <div class="container" id="setup-screen">
    <h2>üéì Welcome to Study Buddy!</h2>

    <label>‚è≥ Study Duration</label>
    <select id="study-duration">
      <option value="25">25 mins</option>
      <option value="50">50 mins</option>
      <option value="90">90 mins</option>
      <option value="custom">Custom</option>
    </select>
    <input type="number" id="custom-duration" placeholder="Enter minutes (min 5)" style="display:none;" />

    <label>üîÅ Break Frequency</label>
    <select id="break-frequency"></select>

    <label>‚òï Break Duration</label>
    <select id="break-duration">
      <option value="5">5 mins</option>
      <option value="10">10 mins</option>
      <option value="15">15 mins</option>
    </select>

    <label>üé≠ Persona</label>
    <select id="persona-select">
      <option value="üò∫">Cat</option>
      <option value="üë®‚Äçüéì">Male PhD Student</option>
      <option value="üë©‚Äçüéì">Female PhD Student</option>
    </select>

    <label>üé® Background</label>
    <select id="background-select">
      <option value="cafe.jpg">Cafe</option>
      <option value="library.jpg">Library</option>
      <option value="studyroom.jpg">Study Room</option>
    </select>

    <button onclick="startSession()">Start Study Session</button>
    <button onclick="toggleMusic()">üéµ Toggle Music</button>
    <div class="music-player" id="music-player">
      <iframe style="border-radius:12px" 
        src="https://open.spotify.com/embed/playlist/4NsAR3jEzcLNSLHDq6CGH1?utm_source=generator" 
        width="100%" height="80" frameBorder="0" 
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
        loading="lazy">
      </iframe>
    </div>
  </div>

  <div id="timer-screen">
    <img id="character-image" src="cat.png" alt="Character" />
    <div id="timer-tools">
      <h2 id="mode-label">Focus Time</h2>
      <h1 id="timer-display">00:00</h1>
      <div id="progress-bar">
        <div id="progress-fill"></div>
      </div>
      <div id="rest-info">Next break in X mins</div>
    </div>
  </div>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Buddy</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #ffe4f2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      transition: background-image 0.5s ease-in-out;
      background-size: cover;
      background-position: center;
    }
    .container {
      max-width: 500px;
      width: 90%;
      background: rgba(255, 240, 245, 0.95);
      padding: 25px;
      margin-top: 40px;
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(255, 105, 180, 0.3);
      border: 2px solid #ff69b4;
    }
    h2 {
      text-align: center;
      color: #d63384;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ffb6c1;
      background: #fff0f5;
      font-size: 16px;
    }
    button {
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      background-color: #ff69b4;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #d63384;
    }
    #timer-screen {
      display: none;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: 20px;
      width: 100%;
      position: relative;
    }
    #character-image {
      max-width: 40%;
      max-height: 80vh;
      object-fit: contain;
    }
    #timer-tools {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      padding: 20px;
    }
    #mode-label {
      font-size: 2em;
      color: #d63384;
    }
    #timer-display {
      font-size: 4em;
      margin: 20px 0;
    }
    #progress-bar {
      width: 10px;
      height: 200px;
      background: #ffd6e8;
      position: relative;
      border-radius: 5px;
    }
    #progress-fill {
      background: #d63384;
      width: 100%;
      position: absolute;
      bottom: 0;
      height: 0%;
      border-radius: 5px;
    }
    #rest-info {
      margin-top: 10px;
    }
    #persona {
      font-size: 2.2rem;
      position: absolute;
      top: 10px;
      right: 20px;
    }
    .music-player {
      margin-top: 20px;
      display: none;
    }
  </style>
</head>
<body>
  <div id="persona">üé≠</div>
  <div class="container" id="setup-screen">
    <h2>üéì Welcome to Study Buddy!</h2>

    <label>‚è≥ Study Duration</label>
    <select id="study-duration">
      <option value="25">25 mins</option>
      <option value="50">50 mins</option>
      <option value="90">90 mins</option>
      <option value="custom">Custom</option>
    </select>
    <input type="number" id="custom-duration" placeholder="Enter minutes (min 5)" style="display:none;" />

    <label>üîÅ Break Frequency</label>
    <select id="break-frequency"></select>

    <label>‚òï Break Duration</label>
    <select id="break-duration">
      <option value="5">5 mins</option>
      <option value="10">10 mins</option>
      <option value="15">15 mins</option>
    </select>

    <label>üé≠ Persona</label>
    <select id="persona-select">
      <option value="üò∫">Cat</option>
      <option value="üë®‚Äçüéì">Male PhD Student</option>
      <option value="üë©‚Äçüéì">Female PhD Student</option>
    </select>

    <label>üé® Background</label>
    <select id="background-select">
      <option value="cafe.jpg">Cafe</option>
      <option value="library.jpg">Library</option>
      <option value="studyroom.jpg">Study Room</option>
    </select>

    <button onclick="startSession()">Start Study Session</button>
    <button onclick="toggleMusic()">üéµ Toggle Music</button>
    <div class="music-player" id="music-player">
      <iframe style="border-radius:12px" 
        src="https://open.spotify.com/embed/playlist/4NsAR3jEzcLNSLHDq6CGH1?utm_source=generator" 
        width="100%" height="80" frameBorder="0" 
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
        loading="lazy">
      </iframe>
    </div>
  </div>

  <div id="timer-screen">
    <img id="character-image" src="cat.png" alt="Character" />
    <div id="timer-tools">
      <h2 id="mode-label">Focus Time</h2>
      <h1 id="timer-display">00:00</h1>
      <div id="progress-bar">
        <div id="progress-fill"></div>
      </div>
      <div id="rest-info">Next break in X mins</div>
    </div>
  </div>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Buddy</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #ffe4f2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      transition: background-image 0.5s ease-in-out;
      background-size: cover;
      background-position: center;
    }
    .container {
      max-width: 500px;
      width: 90%;
      background: rgba(255, 240, 245, 0.95);
      padding: 25px;
      margin-top: 40px;
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(255, 105, 180, 0.3);
      border: 2px solid #ff69b4;
    }
    h2 {
      text-align: center;
      color: #d63384;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ffb6c1;
      background: #fff0f5;
      font-size: 16px;
    }
    button {
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      background-color: #ff69b4;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #d63384;
    }
    #timer-screen {
      display: none;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: 20px;
      width: 100%;
      position: relative;
    }
    #character-image {
      max-width: 40%;
      max-height: 80vh;
      object-fit: contain;
    }
    #timer-tools {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      padding: 20px;
    }
    #mode-label {
      font-size: 2em;
      color: #d63384;
    }
    #timer-display {
      font-size: 4em;
      margin: 20px 0;
    }
    #progress-bar {
      width: 10px;
      height: 200px;
      background: #ffd6e8;
      position: relative;
      border-radius: 5px;
    }
    #progress-fill {
      background: #d63384;
      width: 100%;
      position: absolute;
      bottom: 0;
      height: 0%;
      border-radius: 5px;
    }
    #rest-info {
      margin-top: 10px;
    }
    #persona {
      font-size: 2.2rem;
      position: absolute;
      top: 10px;
      right: 20px;
    }
    .music-player {
      margin-top: 20px;
      display: none;
    }
  </style>
</head>
<body>
  <div id="persona">üé≠</div>
  <div class="container" id="setup-screen">
    <h2>üéì Welcome to Study Buddy!</h2>

    <label>‚è≥ Study Duration</label>
    <select id="study-duration">
      <option value="25">25 mins</option>
      <option value="50">50 mins</option>
      <option value="90">90 mins</option>
      <option value="custom">Custom</option>
    </select>
    <input type="number" id="custom-duration" placeholder="Enter minutes (min 5)" style="display:none;" />

    <label>üîÅ Break Frequency</label>
    <select id="break-frequency"></select>

    <label>‚òï Break Duration</label>
    <select id="break-duration">
      <option value="5">5 mins</option>
      <option value="10">10 mins</option>
      <option value="15">15 mins</option>
    </select>

    <label>üé≠ Persona</label>
    <select id="persona-select">
      <option value="üò∫">Cat</option>
      <option value="üë®‚Äçüéì">Male PhD Student</option>
      <option value="üë©‚Äçüéì">Female PhD Student</option>
    </select>

    <label>üé® Background</label>
    <select id="background-select">
      <option value="cafe.jpg">Cafe</option>
      <option value="library.jpg">Library</option>
      <option value="studyroom.jpg">Study Room</option>
    </select>

    <button onclick="startSession()">Start Study Session</button>
    <button onclick="toggleMusic()">üéµ Toggle Music</button>
    <div class="music-player" id="music-player">
      <iframe style="border-radius:12px" 
        src="https://open.spotify.com/embed/playlist/4NsAR3jEzcLNSLHDq6CGH1?utm_source=generator" 
        width="100%" height="80" frameBorder="0" 
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
        loading="lazy">
      </iframe>
    </div>
  </div>

  <div id="timer-screen">
    <img id="character-image" src="cat.png" alt="Character" />
    <div id="timer-tools">
      <h2 id="mode-label">Focus Time</h2>
      <h1 id="timer-display">00:00</h1>
      <div id="progress-bar">
        <div id="progress-fill"></div>
      </div>
      <div id="rest-info">Next break in X mins</div>
    </div>
  </div>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Buddy</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #ffe4f2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      transition: background-image 0.5s ease-in-out;
      background-size: cover;
      background-position: center;
    }
    .container {
      max-width: 500px;
      width: 90%;
      background: rgba(255, 240, 245, 0.95);
      padding: 25px;
      margin-top: 40px;
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(255, 105, 180, 0.3);
      border: 2px solid #ff69b4;
    }
    h2 {
      text-align: center;
      color: #d63384;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ffb6c1;
      background: #fff0f5;
      font-size: 16px;
    }
    button {
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      background-color: #ff69b4;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #d63384;
    }
    #timer-screen {
      display: none;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: 20px;
      width: 100%;
      position: relative;
    }
    #character-image {
      max-width: 40%;
      max-height: 80vh;
      object-fit: contain;
    }
    #timer-tools {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      padding: 20px;
    }
    #mode-label {
      font-size: 2em;
      color: #d63384;
    }
    #timer-display {
      font-size: 4em;
      margin: 20px 0;
    }
    #progress-bar {
      width: 10px;
      height: 200px;
      background: #ffd6e8;
      position: relative;
      border-radius: 5px;
    }
    #progress-fill {
      background: #d63384;
      width: 100%;
      position: absolute;
      bottom: 0;
      height: 0%;
      border-radius: 5px;
    }
    #rest-info {
      margin-top: 10px;
    }
    #persona {
      font-size: 2.2rem;
      position: absolute;
      top: 10px;
      right: 20px;
    }
    .music-player {
      margin-top: 20px;
      display: none;
    }
  </style>
</head>
<body>
  <div id="persona">üé≠</div>
  <div class="container" id="setup-screen">
    <h2>üéì Welcome to Study Buddy!</h2>

    <label>‚è≥ Study Duration</label>
    <select id="study-duration">
      <option value="25">25 mins</option>
      <option value="50">50 mins</option>
      <option value="90">90 mins</option>
      <option value="custom">Custom</option>
    </select>
    <input type="number" id="custom-duration" placeholder="Enter minutes (min 5)" style="display:none;" />

    <label>üîÅ Break Frequency</label>
    <select id="break-frequency"></select>

    <label>‚òï Break Duration</label>
    <select id="break-duration">
      <option value="5">5 mins</option>
      <option value="10">10 mins</option>
      <option value="15">15 mins</option>
    </select>

    <label>üé≠ Persona</label>
    <select id="persona-select">
      <option value="üò∫">Cat</option>
      <option value="üë®‚Äçüéì">Male PhD Student</option>
      <option value="üë©‚Äçüéì">Female PhD Student</option>
    </select>

    <label>üé® Background</label>
    <select id="background-select">
      <option value="cafe.jpg">Cafe</option>
      <option value="library.jpg">Library</option>
      <option value="studyroom.jpg">Study Room</option>
    </select>

    <button onclick="startSession()">Start Study Session</button>
    <button onclick="toggleMusic()">üéµ Toggle Music</button>
    <div class="music-player" id="music-player">
      <iframe style="border-radius:12px" 
        src="https://open.spotify.com/embed/playlist/4NsAR3jEzcLNSLHDq6CGH1?utm_source=generator" 
        width="100%" height="80" frameBorder="0" 
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
        loading="lazy">
      </iframe>
    </div>
  </div>

  <div id="timer-screen">
    <img id="character-image" src="cat.png" alt="Character" />
    <div id="timer-tools">
      <h2 id="mode-label">Focus Time</h2>
      <h1 id="timer-display">00:00</h1>
      <div id="progress-bar">
        <div id="progress-fill"></div>
      </div>
      <div id="rest-info">Next break in X mins</div>
    </div>
  </div>

  <script>
    const personaIcon = document.getElementById('persona');
    const studyDurationSelect = document.getElementById('study-duration');
    const customDurationInput = document.getElementById('custom-duration');
    const breakFrequencySelect = document.getElementById('break-frequency');
    const timerDisplay = document.getElementById('timer-display');
    const progressFill = document.getElementById('progress-fill');
    const restInfo = document.getElementById('rest-info');
    const timerScreen = document.getElementById('timer-screen');
    const setupScreen = document.getElementById('setup-screen');
    const modeLabel = document.getElementById('mode-label');
    const musicPlayer = document.getElementById('music-player');

    let studyTime = 0;
    let breakTime = 0;
    let interval;
    let remaining = 0;
    let currentPhase = 'study';
    let breakPoints = [];
    let totalTime = 0;

    studyDurationSelect.addEventListener('change', () => {
      if (studyDurationSelect.value === 'custom') {
        customDurationInput.style.display = 'block';
      } else {
        customDurationInput.style.display = 'none';
        updateBreakOptions();
      }
    });

    customDurationInput.addEventListener('input', updateBreakOptions);

    function updateBreakOptions() {
      let value = studyDurationSelect.value === 'custom' ? parseInt(customDurationInput.value) : parseInt(studyDurationSelect.value);
      breakFrequencySelect.innerHTML = '';
      if (value >= 30) {
        for (let i = 15; i <= value / 2; i += 15) {
          let opt = document.createElement('option');
          opt.value = i;
          opt.textContent = `Break every ${i} mins`;
          breakFrequencySelect.appendChild(opt);
        }
      } else {
        let opt = document.createElement('option');
        opt.value = value;
        opt.textContent = `Break after ${value} mins`;
        breakFrequencySelect.appendChild(opt);
      }
    }

    function toggleMusic() {
      musicPlayer.style.display = musicPlayer.style.display === 'none' ? 'block' : 'none';
    }

    function startSession() {
      studyTime = studyDurationSelect.value === 'custom' ? parseInt(customDurationInput.value) : parseInt(studyDurationSelect.value);
      if (isNaN(studyTime) || studyTime < 5) {
        alert('Please enter a valid study duration (minimum 5 minutes).');
        return;
      }
      breakTime = parseInt(document.getElementById('break-duration').value);
      let freq = parseInt(breakFrequencySelect.value);
      breakPoints = [];
      for (let t = freq; t < studyTime; t += freq) breakPoints.push(t);
      totalTime = studyTime + breakPoints.length * breakTime;
      personaIcon.textContent = document.getElementById('persona-select').value;
      document.body.style.backgroundImage = `url('${document.getElementById('background-select').value}')`;

      setupScreen.style.display = 'none';
      timerScreen.style.display = 'flex';
      startTimer();
    }

    function startTimer() {
      let elapsed = 0;
      let nextBreakIndex = 0;
      remaining = studyTime * 60;
      updateDisplay();
      interval = setInterval(() => {
        remaining--;
        elapsed++;
        let percent = (elapsed / (totalTime * 60)) * 100;
        progressFill.style.height = percent + '%';
        updateDisplay();

        if (remaining <= 0) {
          if (currentPhase === 'study' && nextBreakIndex < breakPoints.length) {
            currentPhase = 'break';
            remaining = breakTime * 60;
            modeLabel.textContent = 'Break Time';
            restInfo.textContent = `Work resumes in ${breakTime} mins`;
            new Audio('ding.mp3').play();
            nextBreakIndex++;
          } else if (currentPhase === 'break') {
            currentPhase = 'study';
            let nextSpan = (breakPoints[nextBreakIndex] - breakPoints[nextBreakIndex - 1]) || breakPoints[0];
            remaining = nextSpan * 60;
            modeLabel.textContent = 'Focus Time';
            restInfo.textContent = `Next break in ${Math.floor(remaining / 60)} mins`;
            new Audio('ding.mp3').play();
          } else {
            clearInterval(interval);
            alert('Study session complete! üéâ');
          }
        }
      }, 1000);
    }

    function updateDisplay() {
      let min = Math.floor(remaining / 60);
      let sec = remaining % 60;
      timerDisplay.textContent = `${min.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
    }
  </script>
</body>
</html>
